<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- BOOTSTRAP STYLING -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- CUSTOM STYLING -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- SITE TITTLE -->
    <title>KPS | Bible Projection Application</title>


</head>

<body onpageshow="greet()">
    <!-- HEADER OF THE PAGE -->
    <header class="container-fluid bg-dark" id="header-container">
        <div id="my-logo">
            <img src="/images/kps-logo.png" alt="Developer's logo">
        </div>
        <h1>PROJEXXION</h1>
    </header>

    <!-- MAIN CONTENT CONTAINER -->
    <main class="container-fluid">

        <!-- SELECTOR DIV - WHERE THE USER SELECTS THE QUOTATION -->
        <div id="selector-div" class="bg-light shadow-lg">

            <!-- WHERE THE BIBLE VERSION IS SELECTED eg. KJV, AMP etc -->
            <div id="bible-version">
                <select class="form-select" id="select-version">
                    <option selected>Bible Version</option>
                    <option>King James</option>
                    <option>Basic Engish</option>
                </select>
            </div>

            <!-- WHERE THE BOOK OF THE BIBLE IS SELECTED -->
            <div id="bible-book">
                <!-- <select id="select-book" class="form-select">
                    <option selected>Select Book</option>
                    <option>Genesis</option>
                    <option>Exodus</option>
                    <option>Leviticus</option>
                    <option>Numbers</option>
                    <option>Deuteronomy</option>
                    <option>Joshua</option>
                    <option>Judges</option>
                    <option>2 Timothy</option>
                </select> -->
            </div>

            <!-- CHAPTER OF THE SELECTED BOOK IS CHOSEN -->
            <div id="book-chapter">
                <select id="select-chapter" class="form-select">
                    <option selected>Select Chapter</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>

                <!-- NEXT / PREVIOUS CHAPTER -->
                <fieldset>
                    <div id="nxt-prev-chapt">
                        <div id="prev-btn">
                            <button onclick="resetQuote()" class="btn btn-outline-dark">Prev</button>
                        </div>

                        <div id="nxt-btn">
                            <button onclick="resetQuote()" class="btn btn-outline-info">Nxt</button>
                        </div>
                    </div>
                </fieldset>

            </div>

            <!-- VERSE OF THE SELECTED CHAPTER IS CHOSEN -->
            <div id="chapter-verse">
                <select id="select-verse" class="form-select">
                    <option selected>Select Verse</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>16</option>
                </select>
                <fieldset>
                    <div id="nxt-prev-chapt">
                        <div id="prev-btn">
                            <button onclick="resetQuote()" class="btn btn-outline-dark">Prev</button>
                        </div>

                        <div id="nxt-btn">
                            <button class="btn btn-outline-info">Nxt</button>
                        </div>
                    </div>
                </fieldset>

            </div>


        </div>

        <!-- DISPLAY-DIV WHERE THE SELECTED QUOTATION IS DISPLAYED -->
        <div id="display-div" class="container-fluid bg-white shadow">
            <div id="mini-disp-div" class="container">
                <!-- DISPLAYS THE REFERENCE QUOTATION eg MARK 5:2; -->
                <div id="quotation-ref">
                    <P class="lead" id="book-ref">2 Timothy</P>
                    <p class="lead" id="chapter-ref">3 :</p>
                    <p class="lead" id="verse-ref">16</p>
                </div>

                <!-- DISPLAYS TEXTUAL / ACTUAL QUOTATION -->
                <div id="quotation-text">
                    <p id="quote-text">
                        All scripture is given by inspiration of God, and is profitable for doctrine, for reproof, for
                        correction, for instruction in righteousness:
                    </p>
                </div>

                <!-- BIBLE VERSION -->
                <div id="quotation-version">
                    <p id="quote-version"><em>King James Version</em></p>
                </div>
            </div>

        </div>

    </main>

    <script src="/control-files/index.js"></script>

    <!-- NOTE -->
    <!-- <script type="module" src="/control-files/index.mjs"></script> -->

    <!-- NOTE -->
    <!-- INLINE SCRIPTING -->
    <!-- INLINE SCRIPTING -->
    <script type="module">
        // START OF THE INLINE SCRIPTING // NOTE
        import {
            kjv
        }
        from '../data-files/en-kjv.mjs';

        start(); // NOTE
        // // Extracting the names || to be used for the dropdown list

        function start() {
            // this will extract names from the bible
            let names = kjv.map(books => books.name);

            // generates the dropdownlist of books 
            dropDownNames(names);

            // gets the name of the selected book
            let bookName = document.getElementById('select-book');
            let bookNameStr = bookName.options[bookName.selectedIndex].text;
            console.log(`Selected name is: ${bookNameStr} `);

            // get chapters and use it to generate dropdown list
            getChapters(bookName);


            console.log(`Selected name is: ${bookName} `);
        }

        // this will get book names //console.log(kjv[5].name); // dropdrown of books


        // This creates a dropdown list of books
        function dropDownNames(names) {
            document.getElementById('bible-book').innerHTML = ` <select
            class="form-select" id="select-book" /*onchange="getChapters(this.value)"*/> /*TODO function not getting
            called*/
            <option selected>Choose A Book</option>
            ${names.map(function(name){
            return `<option>${name}</option>`
            }).join("")}
            </select>
            `
        }

        // get selected name and generate dropdown list
        function getChapters(selectedName) {
            // this will extratc chapters from the the selelected book
            let chapters = kjv.map(function (books) {
                if (books.name === selectedName) {
                    for (let i = 0; i < books.chapters.length; i++) {
                        return i + 1;
                    }
                }
            })

            // Generates the dropdown list of chapters using the chapters list above
            dropDownChapters(chapters);
        }


        // dropdown of chapters 
        function dropDownChapters(chapters) {
            document.getElementById('book-chapter').innerHTML = ` <select
                class="form-select" onchange="getChapters(this.value)">
                <option selected>Choose A Chapter</option>
                ${chapters.map(function(chapter){
                return `<option>${chapter}</option>`
                }).join("")}
                </select>
                `
        }
    </script>

</body>

</html>